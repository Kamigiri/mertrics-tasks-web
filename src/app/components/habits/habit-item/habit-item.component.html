<div class="flex items-center gap-4 p-4 bg-white rounded-2xl border border-slate-100 hover:shadow-lg transition-all duration-300 group cursor-pointer"
    (click)="onEdit()">
    <!-- Icon/Color Indicator -->
    <div class="w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-md"
        [style.background-color]="habit().color || '#3b82f6'">
        {{ habit().title.charAt(0).toUpperCase() }}
    </div>

    <!-- Content -->
    <div class="flex-1 min-w-0">
        <h3 class="font-bold text-slate-800 text-lg truncate">{{ habit().title }}</h3>
        @if (habit().notes) {
        <p class="text-slate-500 text-sm truncate">{{ habit().notes }}</p>
        }
    </div>

    <!-- Stats -->
    <div class="flex items-center gap-4 px-4 border-r border-slate-100">
        <div class="text-center">
            <div class="text-xs text-slate-400 font-medium uppercase">Streak</div>
            <div class="text-lg font-bold text-slate-700 flex items-center gap-1">
                <mat-icon class="text-orange-500 scale-75 h-5 w-5">local_fire_department</mat-icon>
                {{ habit().streak }}
            </div>
        </div>

        <!-- Graph -->
        <div class="flex flex-col items-center gap-1">
            <div class="text-xs text-slate-400 font-medium uppercase">Last 7 Days</div>
            <div class="flex gap-1" style="min-height: 12px;">
                @for (day of dayColors(); track day.date) {
                <div class="w-3 h-3 rounded-sm transition-colors border border-slate-200"
                    [style.background-color]="day.color">
                </div>
                }
            </div>
        </div>

        <div class="text-center">
            <div class="text-xs text-slate-400 font-medium uppercase">Goal</div>
            <div class="flex items-baseline gap-1 justify-center text-slate-700">
                @if (habit().frequency === 'daily' || habit().frequency === 'weekly') {
                <span class="text-lg font-bold">{{ habit().goal }}/</span>
                }
                <span class="text-sm font-medium">{{ formattedFrequency }}</span>
            </div>
        </div>
    </div>

    <!-- Actions -->
    <div class="flex items-center gap-2">
        <button mat-icon-button
            class="text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"
            (click)="$event.stopPropagation(); onDelete()">
            <mat-icon>delete</mat-icon>
        </button>
        <button mat-fab
            class="!w-10 !h-10 !shadow-none bg-slate-50 hover:bg-green-50 text-slate-400 hover:text-green-600 border border-slate-200"
            (click)="$event.stopPropagation(); onComplete()">
            <mat-icon>check</mat-icon>
        </button>
    </div>
</div>
